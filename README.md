# Вакансионный бот HH.ru и SuperJob

Этот репозиторий содержит код для вакансионного бота, который выполняет парсинг вакансий с разных платформ, фильтрацию и сортировку результатов, а также предоставляет возможность взаимодействия с отфильтрованным списком вакансий.
Установка

## Клонируйте репозиторий на свой компьютер:

```bash
git clone https://github.com/yourusername/your-repo.git
cd your-repo
```

## Убедитесь, что у вас установлен Poetry и все зависимости указаны в файле pyproject.toml. Если нет, выполните команду:

```bash
poetry install
```
## Запустите главный файл main.py:

```bash
python main.py
```

# Как использовать

- Установить переменные окружения,в частности:

```python
SUPERJOB_SECRET_KEY
``` 

- Запустите главный скрипт main.py.

- При первом запуске, вам будет предложено ввести ключевые слова для парсинга вакансий. После этого произойдет парсинг вакансий и их сохранение в JSON-файл.

- Затем, вам будет предложено выбрать фильтр для списка вакансий. Введите количество вакансий, которые хотите вывести в топ N, а также выберите тип сортировки (по названию или по заработной плате).

- Дополнительные действия:
- - Введите ключевые слова для фильтрации вакансий, если необходимо (можно оставить пустым для вывода всех вакансий).
- - Введите диапазон заработной платы (от и до), если необходимо (можно оставить пустым для вывода всех вакансий).

- После выполнения фильтрации и сортировки, программа выведет топ N вакансий на экран.

- Дополнительные действия (после вывода топ N вакансий):
- - Введите '1' для удаления вакансии из списка (введите ID вакансии).
- - Введите CTRL+C, чтобы закончить работу программы.


### Дополнительная информация

- Для парсинга вакансий с разных платформ используются классы HeadHunterAPI и SuperJobAPI. Эти классы предоставляют методы для получения данных с соответствующих сайтов.
- Класс Currency используется для получения курса валюты и конвертации заработной платы в рубли.
- Класс JSONSaver отвечает за сохранение и обновление списка вакансий в JSON-файле.


### Замечания

- Перед первым запуском бота, убедитесь, что у вас есть файл VACANCY_FILENAME (переменная из настроек), в котором можно будет хранить список вакансий в формате JSON.
- Возможны задержки и ошибки при парсинге данных с внешних сайтов, так как они могут менять свою структуру или ограничивать количество запросов.


# Описание функций `main.py``

1) `main()`

Главная функция, которая обеспечивает основной рабочий процесс бота:

- Создает или обновляет базу данных JSON вакансий.
- Запрашивает у пользователя параметры фильтрации и сортировки вакансий.
- Фильтрует и сортирует вакансии согласно указанным параметрам.
- Выводит топ N вакансий на экран.
- Запускает бесконечный цикл для дополнительных действий с вакансиями (удаление).

2) `get_data(currency, data)`

- Функция для извлечения данных из HTML-страницы с помощью BeautifulSoup. Возвращает ставку и количество единиц (pieces) для заданной валюты.

3) `filter_vacancies(filter_words, salary)`

- Функция для фильтрации вакансий по заданным ключевым словам и диапазону зарплаты.

4) `sort_vacancies(sorting_type, vacancies)`

- Функция для сортировки вакансий по названию или зарплате в зависимости от указанного типа сортировки.

5) `get_top_vacancies(vacancies, top_n)`

- Функция для получения топ N вакансий из списка вакансий.

6) `print_vacancies(vacancies)`

- Функция для вывода списка вакансий на экран.

---
`JSONSaver`

Класс для сохранения вакансий в формате JSON. Содержит метод delete_vacancy, который удаляет ваканцию по ID.